<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Authentication complete</title>
  </head>
  <body>
    <script>
      const params = new URLSearchParams(window.location.search)
      const token = params.get('token') || params.get('access_token')
      const provider = params.get('provider') || 'github'
      const error = params.get('error')
      const message = token
        ? `authorization:${provider}:success:${token}`
        : `authorization:${provider}:error:${error || 'missing_token'}`

      if (window.opener) {
        window.opener.postMessage(message, window.location.origin)
      }

      window.close()
    </script>
    <p>Authentication complete. You can close this window.</p>
  </body>
</html>
